/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import { expect, test } from "vitest";
import { Glean } from "../index.js";
import { RFCDate } from "../types/index.js";
import { createTestHTTPClient } from "./testclient.js";

test("Messages Messages", async () => {
  const testHttpClient = createTestHTTPClient("messages");

  const glean = new Glean({
    httpClient: testHttpClient,
    bearerAuth: process.env["GLEAN_BEARER_AUTH"] ?? "value",
  });

  const result = await glean.client.messages.get({
    messagesRequest: {
      idType: "CONVERSATION_ID",
      id: "<id>",
      timestampMillis: 609658,
    },
  });
  expect(result).toBeDefined();
  expect(result).toEqual({
    hasMore: true,
    searchResponse: {
      trackingToken: "trackingToken",
      results: [
        {
          title: "title",
          url: "https://example.com/foo/bar",
          nativeAppUrl: "slack://foo/bar",
          snippets: [],
        },
      ],
      structuredResults: [
        {
          document: {
            metadata: {
              datasource: "datasource",
              objectType: "Feature Request",
              container: "container",
              parentId: "JIRA_EN-1337",
              mimeType: "mimeType",
              documentId: "documentId",
              createTime: new Date("2000-01-23T04:56:07.000Z"),
              updateTime: new Date("2000-01-23T04:56:07.000Z"),
              author: {
                name: "George Clooney",
                obfuscatedId: "abc123",
                relatedDocuments: [],
                metadata: {
                  type: "FULL_TIME",
                  title: "Actor",
                  department: "Movies",
                  email: "george@example.com",
                  location: "Hollywood, CA",
                  phone: "6505551234",
                  photoUrl: "https://example.com/george.jpg",
                  startDate: new RFCDate("2000-01-23"),
                  datasourceProfile: [
                    {
                      datasource: "github",
                      handle: "<value>",
                    },
                  ],
                  querySuggestions: {
                    suggestions: [],
                  },
                  inviteInfo: {
                    invites: [],
                  },
                  customFields: [],
                  badges: [
                    {
                      key: "deployment_name_new_hire",
                      displayName: "New hire",
                      iconConfig: {
                        color: "#343CED",
                        key: "person_icon",
                        iconType: "GLYPH",
                        name: "user",
                      },
                    },
                  ],
                },
              },
              owner: {
                name: "George Clooney",
                obfuscatedId: "abc123",
              },
              mentionedPeople: [],
              components: [
                "Backend",
                "Networking",
              ],
              status: "[\"Done\"]",
              pins: [],
              assignedTo: {
                name: "George Clooney",
                obfuscatedId: "abc123",
              },
              updatedBy: {
                name: "George Clooney",
                obfuscatedId: "abc123",
              },
              collections: [],
              interactions: {
                reacts: [],
                shares: [],
              },
              verification: {
                state: "UNVERIFIED",
                metadata: {
                  lastVerifier: {
                    name: "George Clooney",
                    obfuscatedId: "abc123",
                  },
                  reminders: [],
                  lastReminder: {
                    assignee: {
                      name: "George Clooney",
                      obfuscatedId: "abc123",
                    },
                    requestor: {
                      name: "George Clooney",
                      obfuscatedId: "abc123",
                    },
                    remindAt: 129663,
                  },
                  candidateVerifiers: [],
                },
              },
              customData: {
                "someCustomField": {},
              },
              contactPerson: {
                name: "George Clooney",
                obfuscatedId: "abc123",
              },
            },
          },
          person: {
            name: "George Clooney",
            obfuscatedId: "abc123",
          },
          customer: {
            id: "<id>",
            company: {
              name: "<value>",
              location: "New York City",
              industry: "Finances",
              about:
                "Financial, software, data, and media company headquartered in Midtown Manhattan, New York City",
            },
            poc: [],
            notes: "CIO is interested in trying out the product.",
          },
          team: {
            id: "<id>",
            name: "<value>",
            members: [],
            datasourceProfiles: [
              {
                datasource: "github",
                handle: "<value>",
              },
              {
                datasource: "github",
                handle: "<value>",
              },
              {
                datasource: "github",
                handle: "<value>",
              },
            ],
            status: "PROCESSED",
            canBeDeleted: true,
          },
          customEntity: {
            roles: [],
          },
          answer: {
            id: 3,
            docId: "ANSWERS_answer_3",
            question: "Why is the sky blue?",
            bodyText:
              "From https://en.wikipedia.org/wiki/Diffuse_sky_radiation, the sky is blue because blue light is more strongly scattered than longer-wavelength light.",
            audienceFilters: [],
            addedRoles: [],
            removedRoles: [],
            combinedAnswerText: {
              text:
                "From https://en.wikipedia.org/wiki/Diffuse_sky_radiation, the sky is blue because blue light is more strongly scattered than longer-wavelength light.",
              structuredList: [],
            },
            likes: {
              likedBy: [],
              likedByUser: true,
              numLikes: 22508,
            },
            board: {
              name: "<value>",
              description: "over aha if unless fooey unbearably",
              audienceFilters: [],
              id: 342305,
              creator: {
                name: "George Clooney",
                obfuscatedId: "abc123",
              },
            },
            sourceDocument: {},
          },
          extractedQnA: {
            questionResult: {
              title: "title",
              url: "https://example.com/foo/bar",
              nativeAppUrl: "slack://foo/bar",
            },
          },
          meeting: {
            attendees: {
              people: [],
            },
          },
          collection: {
            name: "<value>",
            description: "because almighty an",
            audienceFilters: [],
            id: 822820,
            items: [],
          },
          answerBoard: {
            name: "<value>",
            description:
              "labourer row toward meanwhile instead mostly after along contravene filthy",
            audienceFilters: [
              {
                fieldName: "type",
                values: [],
              },
            ],
            id: 609947,
          },
          code: {
            repoName: "scio",
            fileName: "README.md",
            lines: [],
          },
          relatedQuestion: {
            ranges: [],
          },
        },
        {},
      ],
      generatedQnaResult: {
        ranges: [
          {
            startIndex: 86,
          },
          {
            startIndex: 86,
          },
          {
            startIndex: 86,
          },
        ],
      },
      errorInfo: {
        errorMessages: [
          {
            source: "gmail",
            errorMessage: "invalid token",
          },
          {
            source: "slack",
            errorMessage: "expired token",
          },
        ],
      },
      requestID:
        "5e345ae500ff0befa2b9d1a3ba0001737e7363696f312d323535323137000171756572792d656e64706f696e743a323032303031333074313830343032000100",
      backendTimeMillis: 1100,
      metadata: {
        searchedQueryRanges: [
          {
            startIndex: 3307,
          },
        ],
        querySuggestion: {
          query: "app:github type:pull author:mortimer",
          searchProviderInfo: {
            name: "Google",
            searchLinkUrlTemplate:
              "https://www.google.com/search?q={query}&hl=en",
          },
          label: "Mortimer's PRs",
          datasource: "github",
          requestOptions: {
            datasourceFilter: "JIRA",
            datasourcesFilter: [
              "JIRA",
            ],
            queryOverridesFacetFilters: true,
            facetFilters: [
              {
                fieldName: "type",
                values: [
                  {
                    value: "Spreadsheet",
                    relationType: "EQUALS",
                  },
                  {
                    value: "Presentation",
                    relationType: "EQUALS",
                  },
                ],
              },
            ],
            facetFilterSets: [
              {
                filters: [
                  {
                    fieldName: "type",
                    values: [],
                  },
                ],
              },
              {
                filters: [
                  {
                    fieldName: "type",
                    values: [],
                  },
                ],
              },
            ],
            facetBucketSize: 485866,
            authTokens: [
              {
                accessToken: "123abc",
                datasource: "gmail",
                scope:
                  "email profile https://www.googleapis.com/auth/gmail.readonly",
                tokenType: "Bearer",
                authUser: "1",
              },
            ],
          },
          inputDetails: {
            hasCopyPaste: true,
          },
        },
        additionalQuerySuggestions: {},
      },
      facetResults: [
        {
          sourceName: "container_name",
          operatorName: "SelectMultiple",
          buckets: [
            {
              count: 1,
              datasource: "jira",
              percentage: 5,
              value: {
                stringValue: "engineering",
                integerValue: 5,
                displayLabel: "engineering",
                iconConfig: {
                  color: "#343CED",
                  key: "person_icon",
                  iconType: "GLYPH",
                  name: "user",
                },
              },
            },
            {
              count: 1,
              datasource: "jira",
              percentage: 5,
              value: {
                stringValue: "engineering",
                integerValue: 5,
                displayLabel: "engineering",
                iconConfig: {
                  color: "#343CED",
                  key: "person_icon",
                  iconType: "GLYPH",
                  name: "user",
                },
              },
            },
          ],
          hasMoreBuckets: false,
          groupName: "Service Cloud",
        },
        {
          sourceName: "container_name",
          operatorName: "SelectMultiple",
          buckets: [],
          hasMoreBuckets: false,
          groupName: "Service Cloud",
        },
      ],
      resultsDescription: {
        iconConfig: {
          color: "#343CED",
          key: "person_icon",
          iconType: "GLYPH",
          name: "user",
        },
      },
      rewrittenFacetFilters: [
        {
          fieldName: "type",
          values: [],
        },
      ],
      hasMoreResults: true,
    },
    rootMessage: {
      title: "title",
      url: "https://example.com/foo/bar",
      nativeAppUrl: "slack://foo/bar",
      relatedResults: [],
      allClusteredResults: [],
      mustIncludeSuggestions: {},
    },
  });
});
